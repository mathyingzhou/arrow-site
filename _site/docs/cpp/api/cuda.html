


<!DOCTYPE html>
<!--[if IE 8]><html class="no-js lt-ie9" lang="en" > <![endif]-->
<!--[if gt IE 8]><!--> <html class="no-js" lang="en" > <!--<![endif]-->
<head>
  <meta charset="utf-8">
  
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  
  <title>CUDA support &mdash; Apache Arrow v0.13.0</title>
  

  
  
  
  

  
  <script type="text/javascript" src="../../_static/js/modernizr.min.js"></script>
  
    
      <script type="text/javascript" id="documentation_options" data-url_root="../../" src="../../_static/documentation_options.js"></script>
        <script type="text/javascript" src="../../_static/jquery.js"></script>
        <script type="text/javascript" src="../../_static/underscore.js"></script>
        <script type="text/javascript" src="../../_static/doctools.js"></script>
        <script type="text/javascript" src="../../_static/language_data.js"></script>
    
    <script type="text/javascript" src="../../_static/js/theme.js"></script>

    

  
  <link rel="stylesheet" href="../../_static/css/theme.css" type="text/css" />
  <link rel="stylesheet" href="../../_static/pygments.css" type="text/css" />
    <link rel="index" title="Index" href="../../genindex.html" />
    <link rel="search" title="Search" href="../../search.html" />
    <link rel="next" title="Python bindings" href="../../python/index.html" />
    <link rel="prev" title="Utilities" href="utilities.html" /> 
</head>

<body class="wy-body-for-nav">

   
  <div class="wy-grid-for-nav">
    
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search" >
          

          
            <a href="../../index.html" class="icon icon-home"> Apache Arrow
          

          
          </a>

          
            
            
              <div class="version">
                0.13.0
              </div>
            
          

          
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="../../search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>

          
        </div>

        <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="main navigation">
          
            
            
              
            
            
              <p class="caption"><span class="caption-text">Arrow Columnar Format</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../../format/README.html">Arrow specification documents</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../format/Guidelines.html">Implementation guidelines</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../format/Layout.html">Physical memory layout</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../format/Metadata.html">Metadata: Logical types, schemas, data headers</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../format/IPC.html">Interprocess messaging / communication (IPC)</a></li>
</ul>
<p class="caption"><span class="caption-text">Arrow Libraries</span></p>
<ul class="current">
<li class="toctree-l1 current"><a class="reference internal" href="../index.html">C++ Implementation</a><ul class="current">
<li class="toctree-l2"><a class="reference internal" href="../getting_started.html">Getting Started</a></li>
<li class="toctree-l2"><a class="reference internal" href="../examples/index.html">Examples</a></li>
<li class="toctree-l2 current"><a class="reference internal" href="../api.html">API Reference</a><ul class="current">
<li class="toctree-l3"><a class="reference internal" href="support.html">Programming Support</a></li>
<li class="toctree-l3"><a class="reference internal" href="memory.html">Memory (management)</a></li>
<li class="toctree-l3"><a class="reference internal" href="datatype.html">Data Types</a></li>
<li class="toctree-l3"><a class="reference internal" href="array.html">Arrays</a></li>
<li class="toctree-l3"><a class="reference internal" href="builder.html">Array Builders</a></li>
<li class="toctree-l3"><a class="reference internal" href="table.html">Two-dimensional Datasets</a></li>
<li class="toctree-l3"><a class="reference internal" href="utilities.html">Utilities</a></li>
<li class="toctree-l3 current"><a class="current reference internal" href="#">CUDA support</a><ul>
<li class="toctree-l4"><a class="reference internal" href="#cuda-contexts">CUDA Contexts</a></li>
<li class="toctree-l4"><a class="reference internal" href="#device-and-host-buffers">Device and Host Buffers</a></li>
<li class="toctree-l4"><a class="reference internal" href="#device-memory-input-output">Device Memory Input / Output</a></li>
<li class="toctree-l4"><a class="reference internal" href="#cuda-ipc">CUDA IPC</a></li>
</ul>
</li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../../python/index.html">Python bindings</a></li>
</ul>
<p class="caption"><span class="caption-text">Development and Contributing</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../../developers/contributing.html">Contribution Guidelines</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../developers/cpp.html">C++ Development</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../developers/python.html">Python Development</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../developers/integration.html">Integration Testing</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../developers/documentation.html">Building the Documentation</a></li>
</ul>

            
          
        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">

      
      <nav class="wy-nav-top" aria-label="top navigation">
        
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="../../index.html">Apache Arrow</a>
        
      </nav>


      <div class="wy-nav-content">
        
        <div class="rst-content">
        
          















<div role="navigation" aria-label="breadcrumbs navigation">

  <ul class="wy-breadcrumbs">
    
      <li><a href="../../index.html">Docs</a> &raquo;</li>
        
          <li><a href="../index.html">C++ Implementation</a> &raquo;</li>
        
          <li><a href="../api.html">API Reference</a> &raquo;</li>
        
      <li>CUDA support</li>
    
    
      <li class="wy-breadcrumbs-aside">
        
            
            <a href="../../_sources/cpp/api/cuda.rst.txt" rel="nofollow"> View page source</a>
          
        
      </li>
    
  </ul>

  
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
            
  <div class="section" id="cuda-support">
<h1>CUDA support<a class="headerlink" href="#cuda-support" title="Permalink to this headline">¶</a></h1>
<div class="section" id="cuda-contexts">
<h2>CUDA Contexts<a class="headerlink" href="#cuda-contexts" title="Permalink to this headline">¶</a></h2>
<dl class="class">
<dt id="_CPPv4N5arrow4cuda17CudaDeviceManagerE">
<span id="_CPPv3N5arrow4cuda17CudaDeviceManagerE"></span><span id="_CPPv2N5arrow4cuda17CudaDeviceManagerE"></span><span id="arrow::cuda::CudaDeviceManager"></span><span class="target" id="classarrow_1_1cuda_1_1_cuda_device_manager"></span><em class="property">class </em><code class="descname">CudaDeviceManager</code><a class="headerlink" href="#_CPPv4N5arrow4cuda17CudaDeviceManagerE" title="Permalink to this definition">¶</a><br /></dt>
<dd><div class="breathe-sectiondef docutils container">
<p class="breathe-sectiondef-title rubric">Public Functions</p>
<dl class="function">
<dt id="_CPPv4N5arrow4cuda17CudaDeviceManager10GetContextEiPNSt10shared_ptrI11CudaContextEE">
<span id="_CPPv3N5arrow4cuda17CudaDeviceManager10GetContextEiPNSt10shared_ptrI11CudaContextEE"></span><span id="_CPPv2N5arrow4cuda17CudaDeviceManager10GetContextEiPNSt10shared_ptrI11CudaContextEE"></span><span id="arrow::cuda::CudaDeviceManager::GetContext__i.std::shared_ptr:CudaContext:P"></span><span class="target" id="classarrow_1_1cuda_1_1_cuda_device_manager_1adc1ff0b5f95c10dd495cd05360c04a0e"></span><a class="reference internal" href="support.html#_CPPv4N5arrow6StatusE" title="arrow::Status">Status</a> <code class="descname">GetContext</code><span class="sig-paren">(</span>int <em>device_number</em>, std::shared_ptr&lt;<a class="reference internal" href="#_CPPv4N5arrow4cuda11CudaContextE" title="arrow::cuda::CudaContext">CudaContext</a>&gt; *<em>out</em><span class="sig-paren">)</span><a class="headerlink" href="#_CPPv4N5arrow4cuda17CudaDeviceManager10GetContextEiPNSt10shared_ptrI11CudaContextEE" title="Permalink to this definition">¶</a><br /></dt>
<dd><p>Get the CUDA driver context for a particular device. </p>
<p><dl class="docutils">
<dt><strong>Parameters</strong></dt>
<dd><ul class="breatheparameterlist first last simple">
<li><code class="docutils literal notranslate"><span class="pre">device_number</span></code>: the CUDA device </li>
<li><code class="docutils literal notranslate"><span class="pre">out</span></code>: cached context </li>
</ul>
</dd>
</dl>
</p>
</dd></dl>

<dl class="function">
<dt id="_CPPv4N5arrow4cuda17CudaDeviceManager16GetSharedContextEiPvPNSt10shared_ptrI11CudaContextEE">
<span id="_CPPv3N5arrow4cuda17CudaDeviceManager16GetSharedContextEiPvPNSt10shared_ptrI11CudaContextEE"></span><span id="_CPPv2N5arrow4cuda17CudaDeviceManager16GetSharedContextEiPvPNSt10shared_ptrI11CudaContextEE"></span><span id="arrow::cuda::CudaDeviceManager::GetSharedContext__i.voidP.std::shared_ptr:CudaContext:P"></span><span class="target" id="classarrow_1_1cuda_1_1_cuda_device_manager_1ae5f94e2ba45981c752842ef5c3d96237"></span><a class="reference internal" href="support.html#_CPPv4N5arrow6StatusE" title="arrow::Status">Status</a> <code class="descname">GetSharedContext</code><span class="sig-paren">(</span>int <em>device_number</em>, void *<em>handle</em>, std::shared_ptr&lt;<a class="reference internal" href="#_CPPv4N5arrow4cuda11CudaContextE" title="arrow::cuda::CudaContext">CudaContext</a>&gt; *<em>out</em><span class="sig-paren">)</span><a class="headerlink" href="#_CPPv4N5arrow4cuda17CudaDeviceManager16GetSharedContextEiPvPNSt10shared_ptrI11CudaContextEE" title="Permalink to this definition">¶</a><br /></dt>
<dd><p>Get the shared CUDA driver context for a particular device. </p>
<p><dl class="docutils">
<dt><strong>Parameters</strong></dt>
<dd><ul class="breatheparameterlist first last simple">
<li><code class="docutils literal notranslate"><span class="pre">device_number</span></code>: the CUDA device </li>
<li><code class="docutils literal notranslate"><span class="pre">handle</span></code>: CUDA context handler created by another library </li>
<li><code class="docutils literal notranslate"><span class="pre">out</span></code>: shared context </li>
</ul>
</dd>
</dl>
</p>
</dd></dl>

<dl class="function">
<dt id="_CPPv4N5arrow4cuda17CudaDeviceManager12AllocateHostEi7int64_tPNSt10shared_ptrI14CudaHostBufferEE">
<span id="_CPPv3N5arrow4cuda17CudaDeviceManager12AllocateHostEi7int64_tPNSt10shared_ptrI14CudaHostBufferEE"></span><span id="_CPPv2N5arrow4cuda17CudaDeviceManager12AllocateHostEi7int64_tPNSt10shared_ptrI14CudaHostBufferEE"></span><span id="arrow::cuda::CudaDeviceManager::AllocateHost__i.int64_t.std::shared_ptr:CudaHostBuffer:P"></span><span class="target" id="classarrow_1_1cuda_1_1_cuda_device_manager_1ad59e2b01a763993fc028a1856f40c6f2"></span><a class="reference internal" href="support.html#_CPPv4N5arrow6StatusE" title="arrow::Status">Status</a> <code class="descname">AllocateHost</code><span class="sig-paren">(</span>int <em>device_number</em>, int64_t <em>nbytes</em>, std::shared_ptr&lt;<a class="reference internal" href="#_CPPv4N5arrow4cuda14CudaHostBufferE" title="arrow::cuda::CudaHostBuffer">CudaHostBuffer</a>&gt; *<em>out</em><span class="sig-paren">)</span><a class="headerlink" href="#_CPPv4N5arrow4cuda17CudaDeviceManager12AllocateHostEi7int64_tPNSt10shared_ptrI14CudaHostBufferEE" title="Permalink to this definition">¶</a><br /></dt>
<dd><p>Allocate host memory with fast access to given GPU device. </p>
<p><dl class="docutils">
<dt><strong>Parameters</strong></dt>
<dd><ul class="breatheparameterlist first last simple">
<li><code class="docutils literal notranslate"><span class="pre">device_number</span></code>: the CUDA device </li>
<li><code class="docutils literal notranslate"><span class="pre">nbytes</span></code>: number of bytes </li>
<li><code class="docutils literal notranslate"><span class="pre">out</span></code>: the allocated buffer </li>
</ul>
</dd>
</dl>
</p>
</dd></dl>

</div>
</dd></dl>

<dl class="class">
<dt id="_CPPv4N5arrow4cuda11CudaContextE">
<span id="_CPPv3N5arrow4cuda11CudaContextE"></span><span id="_CPPv2N5arrow4cuda11CudaContextE"></span><span id="arrow::cuda::CudaContext"></span><span class="target" id="classarrow_1_1cuda_1_1_cuda_context"></span><em class="property">class </em><code class="descname">CudaContext</code> : <em class="property">public</em> std::enable_shared_from_this&lt;<a class="reference internal" href="#_CPPv4N5arrow4cuda11CudaContextE" title="arrow::cuda::CudaContext">CudaContext</a>&gt;<a class="headerlink" href="#_CPPv4N5arrow4cuda11CudaContextE" title="Permalink to this definition">¶</a><br /></dt>
<dd><p>Friendlier interface to the CUDA driver API. </p>
<div class="breathe-sectiondef docutils container">
<p class="breathe-sectiondef-title rubric">Public Functions</p>
<dl class="function">
<dt id="_CPPv4N5arrow4cuda11CudaContext8AllocateE7int64_tPNSt10shared_ptrI10CudaBufferEE">
<span id="_CPPv3N5arrow4cuda11CudaContext8AllocateE7int64_tPNSt10shared_ptrI10CudaBufferEE"></span><span id="_CPPv2N5arrow4cuda11CudaContext8AllocateE7int64_tPNSt10shared_ptrI10CudaBufferEE"></span><span id="arrow::cuda::CudaContext::Allocate__int64_t.std::shared_ptr:CudaBuffer:P"></span><span class="target" id="classarrow_1_1cuda_1_1_cuda_context_1ae1f7fd73ef674ac0a670467d72cc28e5"></span><a class="reference internal" href="support.html#_CPPv4N5arrow6StatusE" title="arrow::Status">Status</a> <code class="descname">Allocate</code><span class="sig-paren">(</span>int64_t <em>nbytes</em>, std::shared_ptr&lt;<a class="reference internal" href="#_CPPv4N5arrow4cuda10CudaBufferE" title="arrow::cuda::CudaBuffer">CudaBuffer</a>&gt; *<em>out</em><span class="sig-paren">)</span><a class="headerlink" href="#_CPPv4N5arrow4cuda11CudaContext8AllocateE7int64_tPNSt10shared_ptrI10CudaBufferEE" title="Permalink to this definition">¶</a><br /></dt>
<dd><p>Allocate CUDA memory on GPU device for this context. </p>
<p><dl class="docutils">
<dt><strong>Return</strong></dt>
<dd><a class="reference internal" href="support.html#classarrow_1_1_status"><span class="std std-ref">Status</span></a> </dd>
<dt><strong>Parameters</strong></dt>
<dd><ul class="breatheparameterlist first last simple">
<li><code class="docutils literal notranslate"><span class="pre">nbytes</span></code>: number of bytes </li>
<li><code class="docutils literal notranslate"><span class="pre">out</span></code>: the allocated buffer </li>
</ul>
</dd>
</dl>
</p>
</dd></dl>

<dl class="function">
<dt id="_CPPv4N5arrow4cuda11CudaContext4ViewEP7uint8_t7int64_tPNSt10shared_ptrI10CudaBufferEE">
<span id="_CPPv3N5arrow4cuda11CudaContext4ViewEP7uint8_t7int64_tPNSt10shared_ptrI10CudaBufferEE"></span><span id="_CPPv2N5arrow4cuda11CudaContext4ViewEP7uint8_t7int64_tPNSt10shared_ptrI10CudaBufferEE"></span><span id="arrow::cuda::CudaContext::View__uint8_tP.int64_t.std::shared_ptr:CudaBuffer:P"></span><span class="target" id="classarrow_1_1cuda_1_1_cuda_context_1a20f0a6eaa90944b58a99f9bccd52497d"></span><a class="reference internal" href="support.html#_CPPv4N5arrow6StatusE" title="arrow::Status">Status</a> <code class="descname">View</code><span class="sig-paren">(</span>uint8_t *<em>data</em>, int64_t <em>nbytes</em>, std::shared_ptr&lt;<a class="reference internal" href="#_CPPv4N5arrow4cuda10CudaBufferE" title="arrow::cuda::CudaBuffer">CudaBuffer</a>&gt; *<em>out</em><span class="sig-paren">)</span><a class="headerlink" href="#_CPPv4N5arrow4cuda11CudaContext4ViewEP7uint8_t7int64_tPNSt10shared_ptrI10CudaBufferEE" title="Permalink to this definition">¶</a><br /></dt>
<dd><p>Create a view of CUDA memory on GPU device of this context. </p>
<p><dl class="docutils">
<dt><strong>Return</strong></dt>
<dd><a class="reference internal" href="support.html#classarrow_1_1_status"><span class="std std-ref">Status</span></a></dd>
<dt><strong>Note</strong></dt>
<dd>The caller is responsible for allocating and freeing the memory as well as ensuring that the memory belongs to the CUDA context that this <a class="reference internal" href="#classarrow_1_1cuda_1_1_cuda_context"><span class="std std-ref">CudaContext</span></a> instance holds. </dd>
<dt><strong>Parameters</strong></dt>
<dd><ul class="breatheparameterlist first last simple">
<li><code class="docutils literal notranslate"><span class="pre">data</span></code>: the starting device address </li>
<li><code class="docutils literal notranslate"><span class="pre">nbytes</span></code>: number of bytes </li>
<li><code class="docutils literal notranslate"><span class="pre">out</span></code>: the view buffer </li>
</ul>
</dd>
</dl>
</p>
</dd></dl>

<dl class="function">
<dt id="_CPPv4N5arrow4cuda11CudaContext13OpenIpcBufferERK16CudaIpcMemHandlePNSt10shared_ptrI10CudaBufferEE">
<span id="_CPPv3N5arrow4cuda11CudaContext13OpenIpcBufferERK16CudaIpcMemHandlePNSt10shared_ptrI10CudaBufferEE"></span><span id="_CPPv2N5arrow4cuda11CudaContext13OpenIpcBufferERK16CudaIpcMemHandlePNSt10shared_ptrI10CudaBufferEE"></span><span id="arrow::cuda::CudaContext::OpenIpcBuffer__CudaIpcMemHandleCR.std::shared_ptr:CudaBuffer:P"></span><span class="target" id="classarrow_1_1cuda_1_1_cuda_context_1a71525204ccd5e3a30f8456b6ca29dc38"></span><a class="reference internal" href="support.html#_CPPv4N5arrow6StatusE" title="arrow::Status">Status</a> <code class="descname">OpenIpcBuffer</code><span class="sig-paren">(</span><em class="property">const</em> <a class="reference internal" href="#_CPPv4N5arrow4cuda16CudaIpcMemHandleE" title="arrow::cuda::CudaIpcMemHandle">CudaIpcMemHandle</a> &amp;<em>ipc_handle</em>, std::shared_ptr&lt;<a class="reference internal" href="#_CPPv4N5arrow4cuda10CudaBufferE" title="arrow::cuda::CudaBuffer">CudaBuffer</a>&gt; *<em>out</em><span class="sig-paren">)</span><a class="headerlink" href="#_CPPv4N5arrow4cuda11CudaContext13OpenIpcBufferERK16CudaIpcMemHandlePNSt10shared_ptrI10CudaBufferEE" title="Permalink to this definition">¶</a><br /></dt>
<dd><p>Open existing CUDA IPC memory handle. </p>
<p><dl class="docutils">
<dt><strong>Return</strong></dt>
<dd><a class="reference internal" href="support.html#classarrow_1_1_status"><span class="std std-ref">Status</span></a> </dd>
<dt><strong>Parameters</strong></dt>
<dd><ul class="breatheparameterlist first last simple">
<li><code class="docutils literal notranslate"><span class="pre">ipc_handle</span></code>: opaque pointer to CUipcMemHandle (driver API) </li>
<li><code class="docutils literal notranslate"><span class="pre">out</span></code>: a <a class="reference internal" href="#classarrow_1_1cuda_1_1_cuda_buffer"><span class="std std-ref">CudaBuffer</span></a> referencing the IPC segment </li>
</ul>
</dd>
</dl>
</p>
</dd></dl>

<dl class="function">
<dt id="_CPPv4N5arrow4cuda11CudaContext14CloseIpcBufferEP10CudaBuffer">
<span id="_CPPv3N5arrow4cuda11CudaContext14CloseIpcBufferEP10CudaBuffer"></span><span id="_CPPv2N5arrow4cuda11CudaContext14CloseIpcBufferEP10CudaBuffer"></span><span id="arrow::cuda::CudaContext::CloseIpcBuffer__CudaBufferP"></span><span class="target" id="classarrow_1_1cuda_1_1_cuda_context_1a3228bd973c2da795b1b916f81d3bd164"></span><a class="reference internal" href="support.html#_CPPv4N5arrow6StatusE" title="arrow::Status">Status</a> <code class="descname">CloseIpcBuffer</code><span class="sig-paren">(</span><a class="reference internal" href="#_CPPv4N5arrow4cuda10CudaBufferE" title="arrow::cuda::CudaBuffer">CudaBuffer</a> *<em>buffer</em><span class="sig-paren">)</span><a class="headerlink" href="#_CPPv4N5arrow4cuda11CudaContext14CloseIpcBufferEP10CudaBuffer" title="Permalink to this definition">¶</a><br /></dt>
<dd><p>Close memory mapped with IPC buffer. </p>
<p><dl class="docutils">
<dt><strong>Return</strong></dt>
<dd><a class="reference internal" href="support.html#classarrow_1_1_status"><span class="std std-ref">Status</span></a> </dd>
<dt><strong>Parameters</strong></dt>
<dd><ul class="breatheparameterlist first last simple">
<li><code class="docutils literal notranslate"><span class="pre">buffer</span></code>: a <a class="reference internal" href="#classarrow_1_1cuda_1_1_cuda_buffer"><span class="std std-ref">CudaBuffer</span></a> referencing </li>
</ul>
</dd>
</dl>
</p>
</dd></dl>

<dl class="function">
<dt id="_CPPv4N5arrow4cuda11CudaContext11SynchronizeEv">
<span id="_CPPv3N5arrow4cuda11CudaContext11SynchronizeEv"></span><span id="_CPPv2N5arrow4cuda11CudaContext11SynchronizeEv"></span><span id="arrow::cuda::CudaContext::Synchronize__void"></span><span class="target" id="classarrow_1_1cuda_1_1_cuda_context_1a80b22b35b08acac1c0a7b796932612c0"></span><a class="reference internal" href="support.html#_CPPv4N5arrow6StatusE" title="arrow::Status">Status</a> <code class="descname">Synchronize</code><span class="sig-paren">(</span>void<span class="sig-paren">)</span><a class="headerlink" href="#_CPPv4N5arrow4cuda11CudaContext11SynchronizeEv" title="Permalink to this definition">¶</a><br /></dt>
<dd><p>Block until the all device tasks are completed. </p>
</dd></dl>

<dl class="function">
<dt id="_CPPv4NK5arrow4cuda11CudaContext6handleEv">
<span id="_CPPv3NK5arrow4cuda11CudaContext6handleEv"></span><span id="_CPPv2NK5arrow4cuda11CudaContext6handleEv"></span><span id="arrow::cuda::CudaContext::handleC"></span><span class="target" id="classarrow_1_1cuda_1_1_cuda_context_1a6e96e4e5ef6abaecf3448d0f9563b34c"></span>void *<code class="descname">handle</code><span class="sig-paren">(</span><span class="sig-paren">)</span> <em class="property">const</em><a class="headerlink" href="#_CPPv4NK5arrow4cuda11CudaContext6handleEv" title="Permalink to this definition">¶</a><br /></dt>
<dd><p>Expose CUDA context handle to other libraries. </p>
</dd></dl>

<dl class="function">
<dt id="_CPPv4NK5arrow4cuda11CudaContext13device_numberEv">
<span id="_CPPv3NK5arrow4cuda11CudaContext13device_numberEv"></span><span id="_CPPv2NK5arrow4cuda11CudaContext13device_numberEv"></span><span id="arrow::cuda::CudaContext::device_numberC"></span><span class="target" id="classarrow_1_1cuda_1_1_cuda_context_1ab5427be57b455cffa58b353ad8d6fdbf"></span>int <code class="descname">device_number</code><span class="sig-paren">(</span><span class="sig-paren">)</span> <em class="property">const</em><a class="headerlink" href="#_CPPv4NK5arrow4cuda11CudaContext13device_numberEv" title="Permalink to this definition">¶</a><br /></dt>
<dd><p>Return device number. </p>
</dd></dl>

<dl class="function">
<dt id="_CPPv4N5arrow4cuda11CudaContext16GetDeviceAddressEP7uint8_tPP7uint8_t">
<span id="_CPPv3N5arrow4cuda11CudaContext16GetDeviceAddressEP7uint8_tPP7uint8_t"></span><span id="_CPPv2N5arrow4cuda11CudaContext16GetDeviceAddressEP7uint8_tPP7uint8_t"></span><span id="arrow::cuda::CudaContext::GetDeviceAddress__uint8_tP.uint8_tPP"></span><span class="target" id="classarrow_1_1cuda_1_1_cuda_context_1a700f8db21b0cd27376b57792aa78d9f7"></span><a class="reference internal" href="support.html#_CPPv4N5arrow6StatusE" title="arrow::Status">Status</a> <code class="descname">GetDeviceAddress</code><span class="sig-paren">(</span>uint8_t *<em>addr</em>, uint8_t **<em>devaddr</em><span class="sig-paren">)</span><a class="headerlink" href="#_CPPv4N5arrow4cuda11CudaContext16GetDeviceAddressEP7uint8_tPP7uint8_t" title="Permalink to this definition">¶</a><br /></dt>
<dd><p>Return the device address that is reachable from kernels running in the context. </p>
<p><p>The device address is defined as a memory address accessible by device. While it is often a device memory address, it can be also a host memory address, for instance, when the memory is allocated as host memory (using cudaMallocHost or cudaHostAlloc) or as managed memory (using cudaMallocManaged) or the host memory is page-locked (using cudaHostRegister). </p>
<dl class="docutils">
<dt><strong>Return</strong></dt>
<dd><a class="reference internal" href="support.html#classarrow_1_1_status"><span class="std std-ref">Status</span></a></dd>
<dt><strong>Parameters</strong></dt>
<dd><ul class="breatheparameterlist first last simple">
<li><code class="docutils literal notranslate"><span class="pre">addr</span></code>: device or host memory address </li>
<li><code class="docutils literal notranslate"><span class="pre">devaddr</span></code>: the device address </li>
</ul>
</dd>
</dl>
</p>
</dd></dl>

</div>
</dd></dl>

</div>
<div class="section" id="device-and-host-buffers">
<h2>Device and Host Buffers<a class="headerlink" href="#device-and-host-buffers" title="Permalink to this headline">¶</a></h2>
<dl class="class">
<dt id="_CPPv4N5arrow4cuda10CudaBufferE">
<span id="_CPPv3N5arrow4cuda10CudaBufferE"></span><span id="_CPPv2N5arrow4cuda10CudaBufferE"></span><span id="arrow::cuda::CudaBuffer"></span><span class="target" id="classarrow_1_1cuda_1_1_cuda_buffer"></span><em class="property">class </em><code class="descname">CudaBuffer</code> : <em class="property">public</em> arrow::<a class="reference internal" href="memory.html#_CPPv4N5arrow6BufferE" title="arrow::Buffer">Buffer</a><a class="headerlink" href="#_CPPv4N5arrow4cuda10CudaBufferE" title="Permalink to this definition">¶</a><br /></dt>
<dd><p>An Arrow buffer located on a GPU device. </p>
<p>Be careful using this in any Arrow code which may not be GPU-aware </p>
<div class="breathe-sectiondef docutils container">
<p class="breathe-sectiondef-title rubric">Public Functions</p>
<dl class="function">
<dt id="_CPPv4NK5arrow4cuda10CudaBuffer10CopyToHostEK7int64_tK7int64_tPv">
<span id="_CPPv3NK5arrow4cuda10CudaBuffer10CopyToHostEK7int64_tK7int64_tPv"></span><span id="_CPPv2NK5arrow4cuda10CudaBuffer10CopyToHostEK7int64_tK7int64_tPv"></span><span id="arrow::cuda::CudaBuffer::CopyToHost__int64_tC.int64_tC.voidPC"></span><span class="target" id="classarrow_1_1cuda_1_1_cuda_buffer_1a68ec37adb9fc33fb2dbc93b8591eb80b"></span><a class="reference internal" href="support.html#_CPPv4N5arrow6StatusE" title="arrow::Status">Status</a> <code class="descname">CopyToHost</code><span class="sig-paren">(</span><em class="property">const</em> int64_t <em>position</em>, <em class="property">const</em> int64_t <em>nbytes</em>, void *<em>out</em><span class="sig-paren">)</span> <em class="property">const</em><a class="headerlink" href="#_CPPv4NK5arrow4cuda10CudaBuffer10CopyToHostEK7int64_tK7int64_tPv" title="Permalink to this definition">¶</a><br /></dt>
<dd><p>Copy memory from GPU device to CPU host. </p>
<p><dl class="docutils">
<dt><strong>Return</strong></dt>
<dd><a class="reference internal" href="support.html#classarrow_1_1_status"><span class="std std-ref">Status</span></a> </dd>
<dt><strong>Parameters</strong></dt>
<dd><ul class="breatheparameterlist first last simple">
<li><code class="docutils literal notranslate"><span class="pre">position</span></code>: start position inside buffer to copy bytes from </li>
<li><code class="docutils literal notranslate"><span class="pre">nbytes</span></code>: number of bytes to copy </li>
<li><code class="docutils literal notranslate"><span class="pre">out</span></code>: start address of the host memory area to copy to </li>
</ul>
</dd>
</dl>
</p>
</dd></dl>

<dl class="function">
<dt id="_CPPv4N5arrow4cuda10CudaBuffer12CopyFromHostEK7int64_tPKv7int64_t">
<span id="_CPPv3N5arrow4cuda10CudaBuffer12CopyFromHostEK7int64_tPKv7int64_t"></span><span id="_CPPv2N5arrow4cuda10CudaBuffer12CopyFromHostEK7int64_tPKv7int64_t"></span><span id="arrow::cuda::CudaBuffer::CopyFromHost__int64_tC.voidCP.int64_t"></span><span class="target" id="classarrow_1_1cuda_1_1_cuda_buffer_1a941397f8ec48d7578669dea25c601559"></span><a class="reference internal" href="support.html#_CPPv4N5arrow6StatusE" title="arrow::Status">Status</a> <code class="descname">CopyFromHost</code><span class="sig-paren">(</span><em class="property">const</em> int64_t <em>position</em>, <em class="property">const</em> void *<em>data</em>, int64_t <em>nbytes</em><span class="sig-paren">)</span><a class="headerlink" href="#_CPPv4N5arrow4cuda10CudaBuffer12CopyFromHostEK7int64_tPKv7int64_t" title="Permalink to this definition">¶</a><br /></dt>
<dd><p>Copy memory to device at position. </p>
<p><dl class="docutils">
<dt><strong>Return</strong></dt>
<dd><a class="reference internal" href="support.html#classarrow_1_1_status"><span class="std std-ref">Status</span></a> </dd>
<dt><strong>Parameters</strong></dt>
<dd><ul class="breatheparameterlist first last simple">
<li><code class="docutils literal notranslate"><span class="pre">position</span></code>: start position to copy bytes to </li>
<li><code class="docutils literal notranslate"><span class="pre">data</span></code>: the host data to copy </li>
<li><code class="docutils literal notranslate"><span class="pre">nbytes</span></code>: number of bytes to copy </li>
</ul>
</dd>
</dl>
</p>
</dd></dl>

<dl class="function">
<dt id="_CPPv4N5arrow4cuda10CudaBuffer14CopyFromDeviceEK7int64_tPKv7int64_t">
<span id="_CPPv3N5arrow4cuda10CudaBuffer14CopyFromDeviceEK7int64_tPKv7int64_t"></span><span id="_CPPv2N5arrow4cuda10CudaBuffer14CopyFromDeviceEK7int64_tPKv7int64_t"></span><span id="arrow::cuda::CudaBuffer::CopyFromDevice__int64_tC.voidCP.int64_t"></span><span class="target" id="classarrow_1_1cuda_1_1_cuda_buffer_1a41dfd69a882ea4fb138d8b25cc495cfe"></span><a class="reference internal" href="support.html#_CPPv4N5arrow6StatusE" title="arrow::Status">Status</a> <code class="descname">CopyFromDevice</code><span class="sig-paren">(</span><em class="property">const</em> int64_t <em>position</em>, <em class="property">const</em> void *<em>data</em>, int64_t <em>nbytes</em><span class="sig-paren">)</span><a class="headerlink" href="#_CPPv4N5arrow4cuda10CudaBuffer14CopyFromDeviceEK7int64_tPKv7int64_t" title="Permalink to this definition">¶</a><br /></dt>
<dd><p>Copy memory from device to device at position. </p>
<p><dl class="docutils">
<dt><strong>Return</strong></dt>
<dd><a class="reference internal" href="support.html#classarrow_1_1_status"><span class="std std-ref">Status</span></a></dd>
<dt><strong>Note</strong></dt>
<dd>It is assumed that both source and destination device memories have been allocated within the same context. </dd>
<dt><strong>Parameters</strong></dt>
<dd><ul class="breatheparameterlist first last simple">
<li><code class="docutils literal notranslate"><span class="pre">position</span></code>: start position inside buffer to copy bytes to </li>
<li><code class="docutils literal notranslate"><span class="pre">data</span></code>: start address of the device memory area to copy from </li>
<li><code class="docutils literal notranslate"><span class="pre">nbytes</span></code>: number of bytes to copy </li>
</ul>
</dd>
</dl>
</p>
</dd></dl>

<dl class="function">
<dt id="_CPPv4N5arrow4cuda10CudaBuffer21CopyFromAnotherDeviceERKNSt10shared_ptrI11CudaContextEEK7int64_tPKv7int64_t">
<span id="_CPPv3N5arrow4cuda10CudaBuffer21CopyFromAnotherDeviceERKNSt10shared_ptrI11CudaContextEEK7int64_tPKv7int64_t"></span><span id="_CPPv2N5arrow4cuda10CudaBuffer21CopyFromAnotherDeviceERKNSt10shared_ptrI11CudaContextEEK7int64_tPKv7int64_t"></span><span id="arrow::cuda::CudaBuffer::CopyFromAnotherDevice__std::shared_ptr:CudaContext:CR.int64_tC.voidCP.int64_t"></span><span class="target" id="classarrow_1_1cuda_1_1_cuda_buffer_1ad6338774ba17d06ccd9423e5dd4e61e9"></span><a class="reference internal" href="support.html#_CPPv4N5arrow6StatusE" title="arrow::Status">Status</a> <code class="descname">CopyFromAnotherDevice</code><span class="sig-paren">(</span><em class="property">const</em> std::shared_ptr&lt;<a class="reference internal" href="#_CPPv4N5arrow4cuda11CudaContextE" title="arrow::cuda::CudaContext">CudaContext</a>&gt; &amp;<em>src_ctx</em>, <em class="property">const</em> int64_t <em>position</em>, <em class="property">const</em> void *<em>data</em>, int64_t <em>nbytes</em><span class="sig-paren">)</span><a class="headerlink" href="#_CPPv4N5arrow4cuda10CudaBuffer21CopyFromAnotherDeviceERKNSt10shared_ptrI11CudaContextEEK7int64_tPKv7int64_t" title="Permalink to this definition">¶</a><br /></dt>
<dd><p>Copy memory from another device to device at position. </p>
<p><dl class="docutils">
<dt><strong>Return</strong></dt>
<dd><a class="reference internal" href="support.html#classarrow_1_1_status"><span class="std std-ref">Status</span></a> </dd>
<dt><strong>Parameters</strong></dt>
<dd><ul class="breatheparameterlist first last simple">
<li><code class="docutils literal notranslate"><span class="pre">src_ctx</span></code>: context of the source device memory </li>
<li><code class="docutils literal notranslate"><span class="pre">position</span></code>: start position inside buffer to copy bytes to </li>
<li><code class="docutils literal notranslate"><span class="pre">data</span></code>: start address of the another device memory area to copy from </li>
<li><code class="docutils literal notranslate"><span class="pre">nbytes</span></code>: number of bytes to copy </li>
</ul>
</dd>
</dl>
</p>
</dd></dl>

<dl class="function">
<dt id="_CPPv4N5arrow4cuda10CudaBuffer12ExportForIpcEPNSt10shared_ptrI16CudaIpcMemHandleEE">
<span id="_CPPv3N5arrow4cuda10CudaBuffer12ExportForIpcEPNSt10shared_ptrI16CudaIpcMemHandleEE"></span><span id="_CPPv2N5arrow4cuda10CudaBuffer12ExportForIpcEPNSt10shared_ptrI16CudaIpcMemHandleEE"></span><span id="arrow::cuda::CudaBuffer::ExportForIpc__std::shared_ptr:CudaIpcMemHandle:P"></span><span class="target" id="classarrow_1_1cuda_1_1_cuda_buffer_1a490dee9e96f32075c8c04f5119e4ed7b"></span><em class="property">virtual</em> <a class="reference internal" href="support.html#_CPPv4N5arrow6StatusE" title="arrow::Status">Status</a> <code class="descname">ExportForIpc</code><span class="sig-paren">(</span>std::shared_ptr&lt;<a class="reference internal" href="#_CPPv4N5arrow4cuda16CudaIpcMemHandleE" title="arrow::cuda::CudaIpcMemHandle">CudaIpcMemHandle</a>&gt; *<em>handle</em><span class="sig-paren">)</span><a class="headerlink" href="#_CPPv4N5arrow4cuda10CudaBuffer12ExportForIpcEPNSt10shared_ptrI16CudaIpcMemHandleEE" title="Permalink to this definition">¶</a><br /></dt>
<dd><p>Expose this device buffer as IPC memory which can be used in other processes. </p>
<p><dl class="docutils">
<dt><strong>Return</strong></dt>
<dd><a class="reference internal" href="support.html#classarrow_1_1_status"><span class="std std-ref">Status</span></a></dd>
<dt><strong>Note</strong></dt>
<dd>After calling this function, this device memory will not be freed when the <a class="reference internal" href="#classarrow_1_1cuda_1_1_cuda_buffer"><span class="std std-ref">CudaBuffer</span></a> is destructed </dd>
<dt><strong>Parameters</strong></dt>
<dd><ul class="breatheparameterlist first last simple">
<li><code class="docutils literal notranslate"><span class="pre">handle</span></code>: the exported IPC handle </li>
</ul>
</dd>
</dl>
</p>
</dd></dl>

</div>
<div class="breathe-sectiondef docutils container">
<p class="breathe-sectiondef-title rubric">Public Static Functions</p>
<dl class="function">
<dt id="_CPPv4N5arrow4cuda10CudaBuffer10FromBufferENSt10shared_ptrI6BufferEEPNSt10shared_ptrI10CudaBufferEE">
<span id="_CPPv3N5arrow4cuda10CudaBuffer10FromBufferENSt10shared_ptrI6BufferEEPNSt10shared_ptrI10CudaBufferEE"></span><span id="_CPPv2N5arrow4cuda10CudaBuffer10FromBufferENSt10shared_ptrI6BufferEEPNSt10shared_ptrI10CudaBufferEE"></span><span id="arrow::cuda::CudaBuffer::FromBuffer__std::shared_ptr:Buffer:.std::shared_ptr:CudaBuffer:P"></span><span class="target" id="classarrow_1_1cuda_1_1_cuda_buffer_1a46b8a71ae7a4274269775c2297a7e335"></span><em class="property">static</em> <a class="reference internal" href="support.html#_CPPv4N5arrow6StatusE" title="arrow::Status">Status</a> <code class="descname">FromBuffer</code><span class="sig-paren">(</span>std::shared_ptr&lt;<a class="reference internal" href="memory.html#_CPPv4N5arrow6BufferE" title="arrow::Buffer">Buffer</a>&gt; <em>buffer</em>, std::shared_ptr&lt;<a class="reference internal" href="#_CPPv4N5arrow4cuda10CudaBufferE" title="arrow::cuda::CudaBuffer">CudaBuffer</a>&gt; *<em>out</em><span class="sig-paren">)</span><a class="headerlink" href="#_CPPv4N5arrow4cuda10CudaBuffer10FromBufferENSt10shared_ptrI6BufferEEPNSt10shared_ptrI10CudaBufferEE" title="Permalink to this definition">¶</a><br /></dt>
<dd><p>Convert back generic buffer into <a class="reference internal" href="#classarrow_1_1cuda_1_1_cuda_buffer"><span class="std std-ref">CudaBuffer</span></a>. </p>
<p><dl class="docutils">
<dt><strong>Return</strong></dt>
<dd><a class="reference internal" href="support.html#classarrow_1_1_status"><span class="std std-ref">Status</span></a></dd>
<dt><strong>Note</strong></dt>
<dd>This function returns an error if the buffer isn’t backed by GPU memory </dd>
<dt><strong>Parameters</strong></dt>
<dd><ul class="breatheparameterlist first last simple">
<li><code class="docutils literal notranslate"><span class="pre">buffer</span></code>: buffer to convert </li>
<li><code class="docutils literal notranslate"><span class="pre">out</span></code>: conversion result </li>
</ul>
</dd>
</dl>
</p>
</dd></dl>

</div>
</dd></dl>

<dl class="function">
<dt id="_CPPv4N5arrow4cuda22AllocateCudaHostBufferEiK7int64_tPNSt10shared_ptrI14CudaHostBufferEE">
<span id="_CPPv3N5arrow4cuda22AllocateCudaHostBufferEiK7int64_tPNSt10shared_ptrI14CudaHostBufferEE"></span><span id="_CPPv2N5arrow4cuda22AllocateCudaHostBufferEiK7int64_tPNSt10shared_ptrI14CudaHostBufferEE"></span><span id="arrow::cuda::AllocateCudaHostBuffer__i.int64_tC.std::shared_ptr:CudaHostBuffer:P"></span><span class="target" id="namespacearrow_1_1cuda_1a0fe5b064c963ebdedd2b06325ee2a223"></span><a class="reference internal" href="support.html#_CPPv4N5arrow6StatusE" title="arrow::Status">Status</a> <code class="descclassname">arrow::cuda<code class="descclassname">::</code></code><code class="descname">AllocateCudaHostBuffer</code><span class="sig-paren">(</span>int <em>device_number</em>, <em class="property">const</em> int64_t <em>size</em>, std::shared_ptr&lt;<a class="reference internal" href="#_CPPv4N5arrow4cuda14CudaHostBufferE" title="arrow::cuda::CudaHostBuffer">CudaHostBuffer</a>&gt; *<em>out</em><span class="sig-paren">)</span><a class="headerlink" href="#_CPPv4N5arrow4cuda22AllocateCudaHostBufferEiK7int64_tPNSt10shared_ptrI14CudaHostBufferEE" title="Permalink to this definition">¶</a><br /></dt>
<dd><p>Allocate CUDA-accessible memory on CPU host. </p>
<p><dl class="docutils">
<dt><strong>Return</strong></dt>
<dd><a class="reference internal" href="support.html#classarrow_1_1_status"><span class="std std-ref">Status</span></a> </dd>
<dt><strong>Parameters</strong></dt>
<dd><ul class="breatheparameterlist first last simple">
<li><code class="docutils literal notranslate"><span class="pre">device_number</span></code>: device to expose host memory </li>
<li><code class="docutils literal notranslate"><span class="pre">size</span></code>: number of bytes </li>
<li><code class="docutils literal notranslate"><span class="pre">out</span></code>: the allocated buffer </li>
</ul>
</dd>
</dl>
</p>
</dd></dl>

<dl class="class">
<dt id="_CPPv4N5arrow4cuda14CudaHostBufferE">
<span id="_CPPv3N5arrow4cuda14CudaHostBufferE"></span><span id="_CPPv2N5arrow4cuda14CudaHostBufferE"></span><span id="arrow::cuda::CudaHostBuffer"></span><span class="target" id="classarrow_1_1cuda_1_1_cuda_host_buffer"></span><em class="property">class </em><code class="descname">CudaHostBuffer</code> : <em class="property">public</em> arrow::<a class="reference internal" href="memory.html#_CPPv4N5arrow13MutableBufferE" title="arrow::MutableBuffer">MutableBuffer</a><a class="headerlink" href="#_CPPv4N5arrow4cuda14CudaHostBufferE" title="Permalink to this definition">¶</a><br /></dt>
<dd><p>Device-accessible CPU memory created using cudaHostAlloc. </p>
</dd></dl>

</div>
<div class="section" id="device-memory-input-output">
<h2>Device Memory Input / Output<a class="headerlink" href="#device-memory-input-output" title="Permalink to this headline">¶</a></h2>
<dl class="class">
<dt id="_CPPv4N5arrow4cuda16CudaBufferReaderE">
<span id="_CPPv3N5arrow4cuda16CudaBufferReaderE"></span><span id="_CPPv2N5arrow4cuda16CudaBufferReaderE"></span><span id="arrow::cuda::CudaBufferReader"></span><span class="target" id="classarrow_1_1cuda_1_1_cuda_buffer_reader"></span><em class="property">class </em><code class="descname">CudaBufferReader</code> : <em class="property">public</em> arrow::io::BufferReader<a class="headerlink" href="#_CPPv4N5arrow4cuda16CudaBufferReaderE" title="Permalink to this definition">¶</a><br /></dt>
<dd><p>File interface for zero-copy read from CUDA buffers. </p>
<p>Note: Reads return pointers to device memory. This means you must be careful using this interface with any Arrow code which may expect to be able to do anything other than pointer arithmetic on the returned buffers </p>
<div class="breathe-sectiondef docutils container">
<p class="breathe-sectiondef-title rubric">Public Functions</p>
<dl class="function">
<dt id="_CPPv4N5arrow4cuda16CudaBufferReader4ReadE7int64_tP7int64_tPv">
<span id="_CPPv3N5arrow4cuda16CudaBufferReader4ReadE7int64_tP7int64_tPv"></span><span id="_CPPv2N5arrow4cuda16CudaBufferReader4ReadE7int64_tP7int64_tPv"></span><span id="arrow::cuda::CudaBufferReader::Read__int64_t.int64_tP.voidP"></span><span class="target" id="classarrow_1_1cuda_1_1_cuda_buffer_reader_1a28ca1a848fe1a21fe238da5f26c79b3f"></span><a class="reference internal" href="support.html#_CPPv4N5arrow6StatusE" title="arrow::Status">Status</a> <code class="descname">Read</code><span class="sig-paren">(</span>int64_t <em>nbytes</em>, int64_t *<em>bytes_read</em>, void *<em>buffer</em><span class="sig-paren">)</span><a class="headerlink" href="#_CPPv4N5arrow4cuda16CudaBufferReader4ReadE7int64_tP7int64_tPv" title="Permalink to this definition">¶</a><br /></dt>
<dd><p>Read bytes into pre-allocated host memory. </p>
<p><dl class="docutils">
<dt><strong>Parameters</strong></dt>
<dd><ul class="breatheparameterlist first last simple">
<li><code class="docutils literal notranslate"><span class="pre">nbytes</span></code>: number of bytes to read </li>
<li><code class="docutils literal notranslate"><span class="pre">bytes_read</span></code>: actual number of bytes read </li>
<li><code class="docutils literal notranslate"><span class="pre">buffer</span></code>: pre-allocated memory to write into </li>
</ul>
</dd>
</dl>
</p>
</dd></dl>

<dl class="function">
<dt id="_CPPv4N5arrow4cuda16CudaBufferReader4ReadE7int64_tPNSt10shared_ptrI6BufferEE">
<span id="_CPPv3N5arrow4cuda16CudaBufferReader4ReadE7int64_tPNSt10shared_ptrI6BufferEE"></span><span id="_CPPv2N5arrow4cuda16CudaBufferReader4ReadE7int64_tPNSt10shared_ptrI6BufferEE"></span><span id="arrow::cuda::CudaBufferReader::Read__int64_t.std::shared_ptr:Buffer:P"></span><span class="target" id="classarrow_1_1cuda_1_1_cuda_buffer_reader_1a642245662eec968a269c7601ec51d54d"></span><a class="reference internal" href="support.html#_CPPv4N5arrow6StatusE" title="arrow::Status">Status</a> <code class="descname">Read</code><span class="sig-paren">(</span>int64_t <em>nbytes</em>, std::shared_ptr&lt;<a class="reference internal" href="memory.html#_CPPv4N5arrow6BufferE" title="arrow::Buffer">Buffer</a>&gt; *<em>out</em><span class="sig-paren">)</span><a class="headerlink" href="#_CPPv4N5arrow4cuda16CudaBufferReader4ReadE7int64_tPNSt10shared_ptrI6BufferEE" title="Permalink to this definition">¶</a><br /></dt>
<dd><p>Zero-copy read from device memory. </p>
<p><dl class="docutils">
<dt><strong>Return</strong></dt>
<dd><a class="reference internal" href="support.html#classarrow_1_1_status"><span class="std std-ref">Status</span></a> </dd>
<dt><strong>Parameters</strong></dt>
<dd><ul class="breatheparameterlist first last simple">
<li><code class="docutils literal notranslate"><span class="pre">nbytes</span></code>: number of bytes to read </li>
<li><code class="docutils literal notranslate"><span class="pre">out</span></code>: a <a class="reference internal" href="memory.html#classarrow_1_1_buffer"><span class="std std-ref">Buffer</span></a> referencing device memory </li>
</ul>
</dd>
</dl>
</p>
</dd></dl>

</div>
</dd></dl>

<dl class="class">
<dt id="_CPPv4N5arrow4cuda16CudaBufferWriterE">
<span id="_CPPv3N5arrow4cuda16CudaBufferWriterE"></span><span id="_CPPv2N5arrow4cuda16CudaBufferWriterE"></span><span id="arrow::cuda::CudaBufferWriter"></span><span class="target" id="classarrow_1_1cuda_1_1_cuda_buffer_writer"></span><em class="property">class </em><code class="descname">CudaBufferWriter</code> : <em class="property">public</em> arrow::io::WritableFile<a class="headerlink" href="#_CPPv4N5arrow4cuda16CudaBufferWriterE" title="Permalink to this definition">¶</a><br /></dt>
<dd><p>File interface for writing to CUDA buffers, with optional buffering. </p>
<div class="breathe-sectiondef docutils container">
<p class="breathe-sectiondef-title rubric">Public Functions</p>
<dl class="function">
<dt id="_CPPv4N5arrow4cuda16CudaBufferWriter5CloseEv">
<span id="_CPPv3N5arrow4cuda16CudaBufferWriter5CloseEv"></span><span id="_CPPv2N5arrow4cuda16CudaBufferWriter5CloseEv"></span><span id="arrow::cuda::CudaBufferWriter::Close"></span><span class="target" id="classarrow_1_1cuda_1_1_cuda_buffer_writer_1a0ea8c0db5348cb6c7a95581545708106"></span><a class="reference internal" href="support.html#_CPPv4N5arrow6StatusE" title="arrow::Status">Status</a> <code class="descname">Close</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#_CPPv4N5arrow4cuda16CudaBufferWriter5CloseEv" title="Permalink to this definition">¶</a><br /></dt>
<dd><p>Close writer and flush buffered bytes to GPU. </p>
</dd></dl>

<dl class="function">
<dt id="_CPPv4N5arrow4cuda16CudaBufferWriter5FlushEv">
<span id="_CPPv3N5arrow4cuda16CudaBufferWriter5FlushEv"></span><span id="_CPPv2N5arrow4cuda16CudaBufferWriter5FlushEv"></span><span id="arrow::cuda::CudaBufferWriter::Flush"></span><span class="target" id="classarrow_1_1cuda_1_1_cuda_buffer_writer_1a5b1378916dcf383f54bbe22ae6519119"></span><a class="reference internal" href="support.html#_CPPv4N5arrow6StatusE" title="arrow::Status">Status</a> <code class="descname">Flush</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#_CPPv4N5arrow4cuda16CudaBufferWriter5FlushEv" title="Permalink to this definition">¶</a><br /></dt>
<dd><p>Flush buffered bytes to GPU. </p>
</dd></dl>

<dl class="function">
<dt id="_CPPv4N5arrow4cuda16CudaBufferWriter13SetBufferSizeEK7int64_t">
<span id="_CPPv3N5arrow4cuda16CudaBufferWriter13SetBufferSizeEK7int64_t"></span><span id="_CPPv2N5arrow4cuda16CudaBufferWriter13SetBufferSizeEK7int64_t"></span><span id="arrow::cuda::CudaBufferWriter::SetBufferSize__int64_tC"></span><span class="target" id="classarrow_1_1cuda_1_1_cuda_buffer_writer_1afe2b3f481f6dc35d292b2b808f5c4aae"></span><a class="reference internal" href="support.html#_CPPv4N5arrow6StatusE" title="arrow::Status">Status</a> <code class="descname">SetBufferSize</code><span class="sig-paren">(</span><em class="property">const</em> int64_t <em>buffer_size</em><span class="sig-paren">)</span><a class="headerlink" href="#_CPPv4N5arrow4cuda16CudaBufferWriter13SetBufferSizeEK7int64_t" title="Permalink to this definition">¶</a><br /></dt>
<dd><p>Set CPU buffer size to limit calls to cudaMemcpy. </p>
<p><p>By default writes are unbuffered </p>
<dl class="docutils">
<dt><strong>Return</strong></dt>
<dd><a class="reference internal" href="support.html#classarrow_1_1_status"><span class="std std-ref">Status</span></a></dd>
<dt><strong>Parameters</strong></dt>
<dd><ul class="breatheparameterlist first last simple">
<li><code class="docutils literal notranslate"><span class="pre">buffer_size</span></code>: the size of CPU buffer to allocate </li>
</ul>
</dd>
</dl>
</p>
</dd></dl>

<dl class="function">
<dt id="_CPPv4NK5arrow4cuda16CudaBufferWriter11buffer_sizeEv">
<span id="_CPPv3NK5arrow4cuda16CudaBufferWriter11buffer_sizeEv"></span><span id="_CPPv2NK5arrow4cuda16CudaBufferWriter11buffer_sizeEv"></span><span id="arrow::cuda::CudaBufferWriter::buffer_sizeC"></span><span class="target" id="classarrow_1_1cuda_1_1_cuda_buffer_writer_1a2a552698ce0327a211d7cc21ba44a7b6"></span>int64_t <code class="descname">buffer_size</code><span class="sig-paren">(</span><span class="sig-paren">)</span> <em class="property">const</em><a class="headerlink" href="#_CPPv4NK5arrow4cuda16CudaBufferWriter11buffer_sizeEv" title="Permalink to this definition">¶</a><br /></dt>
<dd><p>Returns size of host (CPU) buffer, 0 for unbuffered. </p>
</dd></dl>

<dl class="function">
<dt id="_CPPv4NK5arrow4cuda16CudaBufferWriter18num_bytes_bufferedEv">
<span id="_CPPv3NK5arrow4cuda16CudaBufferWriter18num_bytes_bufferedEv"></span><span id="_CPPv2NK5arrow4cuda16CudaBufferWriter18num_bytes_bufferedEv"></span><span id="arrow::cuda::CudaBufferWriter::num_bytes_bufferedC"></span><span class="target" id="classarrow_1_1cuda_1_1_cuda_buffer_writer_1aab6152a10e047d397137b5021e9a7292"></span>int64_t <code class="descname">num_bytes_buffered</code><span class="sig-paren">(</span><span class="sig-paren">)</span> <em class="property">const</em><a class="headerlink" href="#_CPPv4NK5arrow4cuda16CudaBufferWriter18num_bytes_bufferedEv" title="Permalink to this definition">¶</a><br /></dt>
<dd><p>Returns number of bytes buffered on host. </p>
</dd></dl>

</div>
</dd></dl>

</div>
<div class="section" id="cuda-ipc">
<h2>CUDA IPC<a class="headerlink" href="#cuda-ipc" title="Permalink to this headline">¶</a></h2>
<dl class="class">
<dt id="_CPPv4N5arrow4cuda16CudaIpcMemHandleE">
<span id="_CPPv3N5arrow4cuda16CudaIpcMemHandleE"></span><span id="_CPPv2N5arrow4cuda16CudaIpcMemHandleE"></span><span id="arrow::cuda::CudaIpcMemHandle"></span><span class="target" id="classarrow_1_1cuda_1_1_cuda_ipc_mem_handle"></span><em class="property">class </em><code class="descname">CudaIpcMemHandle</code><a class="headerlink" href="#_CPPv4N5arrow4cuda16CudaIpcMemHandleE" title="Permalink to this definition">¶</a><br /></dt>
<dd><div class="breathe-sectiondef docutils container">
<p class="breathe-sectiondef-title rubric">Public Functions</p>
<dl class="function">
<dt id="_CPPv4NK5arrow4cuda16CudaIpcMemHandle9SerializeEP10MemoryPoolPNSt10shared_ptrI6BufferEE">
<span id="_CPPv3NK5arrow4cuda16CudaIpcMemHandle9SerializeEP10MemoryPoolPNSt10shared_ptrI6BufferEE"></span><span id="_CPPv2NK5arrow4cuda16CudaIpcMemHandle9SerializeEP10MemoryPoolPNSt10shared_ptrI6BufferEE"></span><span id="arrow::cuda::CudaIpcMemHandle::Serialize__MemoryPoolP.std::shared_ptr:Buffer:PC"></span><span class="target" id="classarrow_1_1cuda_1_1_cuda_ipc_mem_handle_1a4a5321e616e9126b4772dc82f04d81bd"></span><a class="reference internal" href="support.html#_CPPv4N5arrow6StatusE" title="arrow::Status">Status</a> <code class="descname">Serialize</code><span class="sig-paren">(</span><a class="reference internal" href="memory.html#_CPPv4N5arrow10MemoryPoolE" title="arrow::MemoryPool">MemoryPool</a> *<em>pool</em>, std::shared_ptr&lt;<a class="reference internal" href="memory.html#_CPPv4N5arrow6BufferE" title="arrow::Buffer">Buffer</a>&gt; *<em>out</em><span class="sig-paren">)</span> <em class="property">const</em><a class="headerlink" href="#_CPPv4NK5arrow4cuda16CudaIpcMemHandle9SerializeEP10MemoryPoolPNSt10shared_ptrI6BufferEE" title="Permalink to this definition">¶</a><br /></dt>
<dd><p>Write <a class="reference internal" href="#classarrow_1_1cuda_1_1_cuda_ipc_mem_handle"><span class="std std-ref">CudaIpcMemHandle</span></a> to a <a class="reference internal" href="memory.html#classarrow_1_1_buffer"><span class="std std-ref">Buffer</span></a>. </p>
<p><dl class="docutils">
<dt><strong>Return</strong></dt>
<dd><a class="reference internal" href="support.html#classarrow_1_1_status"><span class="std std-ref">Status</span></a> </dd>
<dt><strong>Parameters</strong></dt>
<dd><ul class="breatheparameterlist first last simple">
<li><code class="docutils literal notranslate"><span class="pre">pool</span></code>: a <a class="reference internal" href="memory.html#classarrow_1_1_memory_pool"><span class="std std-ref">MemoryPool</span></a> to allocate memory from </li>
<li><code class="docutils literal notranslate"><span class="pre">out</span></code>: the serialized buffer </li>
</ul>
</dd>
</dl>
</p>
</dd></dl>

</div>
<div class="breathe-sectiondef docutils container">
<p class="breathe-sectiondef-title rubric">Public Static Functions</p>
<dl class="function">
<dt id="_CPPv4N5arrow4cuda16CudaIpcMemHandle10FromBufferEPKvPNSt10shared_ptrI16CudaIpcMemHandleEE">
<span id="_CPPv3N5arrow4cuda16CudaIpcMemHandle10FromBufferEPKvPNSt10shared_ptrI16CudaIpcMemHandleEE"></span><span id="_CPPv2N5arrow4cuda16CudaIpcMemHandle10FromBufferEPKvPNSt10shared_ptrI16CudaIpcMemHandleEE"></span><span id="arrow::cuda::CudaIpcMemHandle::FromBuffer__voidCP.std::shared_ptr:CudaIpcMemHandle:P"></span><span class="target" id="classarrow_1_1cuda_1_1_cuda_ipc_mem_handle_1aa139381de991e30041375e211e1e5790"></span><em class="property">static</em> <a class="reference internal" href="support.html#_CPPv4N5arrow6StatusE" title="arrow::Status">Status</a> <code class="descname">FromBuffer</code><span class="sig-paren">(</span><em class="property">const</em> void *<em>opaque_handle</em>, std::shared_ptr&lt;<a class="reference internal" href="#_CPPv4N5arrow4cuda16CudaIpcMemHandleE" title="arrow::cuda::CudaIpcMemHandle">CudaIpcMemHandle</a>&gt; *<em>handle</em><span class="sig-paren">)</span><a class="headerlink" href="#_CPPv4N5arrow4cuda16CudaIpcMemHandle10FromBufferEPKvPNSt10shared_ptrI16CudaIpcMemHandleEE" title="Permalink to this definition">¶</a><br /></dt>
<dd><p>Create <a class="reference internal" href="#classarrow_1_1cuda_1_1_cuda_ipc_mem_handle"><span class="std std-ref">CudaIpcMemHandle</span></a> from opaque buffer (e.g. </p>
<p>from another process) <dl class="docutils">
<dt><strong>Return</strong></dt>
<dd><a class="reference internal" href="support.html#classarrow_1_1_status"><span class="std std-ref">Status</span></a> </dd>
<dt><strong>Parameters</strong></dt>
<dd><ul class="breatheparameterlist first last simple">
<li><code class="docutils literal notranslate"><span class="pre">opaque_handle</span></code>: a CUipcMemHandle as a const void* </li>
<li><code class="docutils literal notranslate"><span class="pre">handle</span></code>: the <a class="reference internal" href="#classarrow_1_1cuda_1_1_cuda_ipc_mem_handle"><span class="std std-ref">CudaIpcMemHandle</span></a> instance </li>
</ul>
</dd>
</dl>
</p>
</dd></dl>

</div>
</dd></dl>

<dl class="function">
<dt id="_CPPv4N5arrow4cuda20SerializeRecordBatchERK11RecordBatchP11CudaContextPNSt10shared_ptrI10CudaBufferEE">
<span id="_CPPv3N5arrow4cuda20SerializeRecordBatchERK11RecordBatchP11CudaContextPNSt10shared_ptrI10CudaBufferEE"></span><span id="_CPPv2N5arrow4cuda20SerializeRecordBatchERK11RecordBatchP11CudaContextPNSt10shared_ptrI10CudaBufferEE"></span><span id="arrow::cuda::SerializeRecordBatch__RecordBatchCR.CudaContextP.std::shared_ptr:CudaBuffer:P"></span><span class="target" id="namespacearrow_1_1cuda_1a10e8fc4657cd1bc1226be86f8207a33a"></span><a class="reference internal" href="support.html#_CPPv4N5arrow6StatusE" title="arrow::Status">Status</a> <code class="descclassname">arrow::cuda<code class="descclassname">::</code></code><code class="descname">SerializeRecordBatch</code><span class="sig-paren">(</span><em class="property">const</em> <a class="reference internal" href="table.html#_CPPv4N5arrow11RecordBatchE" title="arrow::RecordBatch">RecordBatch</a> &amp;<em>batch</em>, <a class="reference internal" href="#_CPPv4N5arrow4cuda11CudaContextE" title="arrow::cuda::CudaContext">CudaContext</a> *<em>ctx</em>, std::shared_ptr&lt;<a class="reference internal" href="#_CPPv4N5arrow4cuda10CudaBufferE" title="arrow::cuda::CudaBuffer">CudaBuffer</a>&gt; *<em>out</em><span class="sig-paren">)</span><a class="headerlink" href="#_CPPv4N5arrow4cuda20SerializeRecordBatchERK11RecordBatchP11CudaContextPNSt10shared_ptrI10CudaBufferEE" title="Permalink to this definition">¶</a><br /></dt>
<dd><p>Write record batch message to GPU device memory. </p>
<p><dl class="docutils">
<dt><strong>Return</strong></dt>
<dd><a class="reference internal" href="support.html#classarrow_1_1_status"><span class="std std-ref">Status</span></a> </dd>
<dt><strong>Parameters</strong></dt>
<dd><ul class="breatheparameterlist first last simple">
<li><code class="docutils literal notranslate"><span class="pre">batch</span></code>: record batch to write </li>
<li><code class="docutils literal notranslate"><span class="pre">ctx</span></code>: <a class="reference internal" href="#classarrow_1_1cuda_1_1_cuda_context"><span class="std std-ref">CudaContext</span></a> to allocate device memory from </li>
<li><code class="docutils literal notranslate"><span class="pre">out</span></code>: the returned device buffer which contains the record batch message </li>
</ul>
</dd>
</dl>
</p>
</dd></dl>

<dl class="function">
<dt id="_CPPv4N5arrow4cuda15ReadRecordBatchERKNSt10shared_ptrI6SchemaEERKNSt10shared_ptrI10CudaBufferEEP10MemoryPoolPNSt10shared_ptrI11RecordBatchEE">
<span id="_CPPv3N5arrow4cuda15ReadRecordBatchERKNSt10shared_ptrI6SchemaEERKNSt10shared_ptrI10CudaBufferEEP10MemoryPoolPNSt10shared_ptrI11RecordBatchEE"></span><span id="_CPPv2N5arrow4cuda15ReadRecordBatchERKNSt10shared_ptrI6SchemaEERKNSt10shared_ptrI10CudaBufferEEP10MemoryPoolPNSt10shared_ptrI11RecordBatchEE"></span><span id="arrow::cuda::ReadRecordBatch__std::shared_ptr:Schema:CR.std::shared_ptr:CudaBuffer:CR.MemoryPoolP.std::shared_ptr:RecordBatch:P"></span><span class="target" id="namespacearrow_1_1cuda_1a2ea27e130a2b625b4d2b807eb61d2faa"></span><a class="reference internal" href="support.html#_CPPv4N5arrow6StatusE" title="arrow::Status">Status</a> <code class="descclassname">arrow::cuda<code class="descclassname">::</code></code><code class="descname">ReadRecordBatch</code><span class="sig-paren">(</span><em class="property">const</em> std::shared_ptr&lt;<a class="reference internal" href="datatype.html#_CPPv4N5arrow6SchemaE" title="arrow::Schema">Schema</a>&gt; &amp;<em>schema</em>, <em class="property">const</em> std::shared_ptr&lt;<a class="reference internal" href="#_CPPv4N5arrow4cuda10CudaBufferE" title="arrow::cuda::CudaBuffer">CudaBuffer</a>&gt; &amp;<em>buffer</em>, <a class="reference internal" href="memory.html#_CPPv4N5arrow10MemoryPoolE" title="arrow::MemoryPool">MemoryPool</a> *<em>pool</em>, std::shared_ptr&lt;<a class="reference internal" href="table.html#_CPPv4N5arrow11RecordBatchE" title="arrow::RecordBatch">RecordBatch</a>&gt; *<em>out</em><span class="sig-paren">)</span><a class="headerlink" href="#_CPPv4N5arrow4cuda15ReadRecordBatchERKNSt10shared_ptrI6SchemaEERKNSt10shared_ptrI10CudaBufferEEP10MemoryPoolPNSt10shared_ptrI11RecordBatchEE" title="Permalink to this definition">¶</a><br /></dt>
<dd><p>ReadRecordBatch specialized to handle metadata on CUDA device. </p>
<p><dl class="docutils">
<dt><strong>Parameters</strong></dt>
<dd><ul class="breatheparameterlist first last simple">
<li><code class="docutils literal notranslate"><span class="pre">schema</span></code>: the <a class="reference internal" href="datatype.html#classarrow_1_1_schema"><span class="std std-ref">Schema</span></a> for the record batch </li>
<li><code class="docutils literal notranslate"><span class="pre">buffer</span></code>: a <a class="reference internal" href="#classarrow_1_1cuda_1_1_cuda_buffer"><span class="std std-ref">CudaBuffer</span></a> containing the complete IPC message </li>
<li><code class="docutils literal notranslate"><span class="pre">pool</span></code>: a <a class="reference internal" href="memory.html#classarrow_1_1_memory_pool"><span class="std std-ref">MemoryPool</span></a> to use for allocating space for the metadata </li>
<li><code class="docutils literal notranslate"><span class="pre">out</span></code>: the reconstructed <a class="reference internal" href="table.html#classarrow_1_1_record_batch"><span class="std std-ref">RecordBatch</span></a>, with device pointers </li>
</ul>
</dd>
</dl>
</p>
</dd></dl>

</div>
</div>


           </div>
           
          </div>
          <footer>
  
    <div class="rst-footer-buttons" role="navigation" aria-label="footer navigation">
      
        <a href="../../python/index.html" class="btn btn-neutral float-right" title="Python bindings" accesskey="n" rel="next">Next <span class="fa fa-arrow-circle-right"></span></a>
      
      
        <a href="utilities.html" class="btn btn-neutral float-left" title="Utilities" accesskey="p" rel="prev"><span class="fa fa-arrow-circle-left"></span> Previous</a>
      
    </div>
  

  <hr/>

  <div role="contentinfo">
    <p>
        &copy; Copyright 2016-2018 Apache Software Foundation

    </p>
  </div>
  Built with <a href="http://sphinx-doc.org/">Sphinx</a> using a <a href="https://github.com/rtfd/sphinx_rtd_theme">theme</a> provided by <a href="https://readthedocs.org">Read the Docs</a>. 

</footer>

        </div>
      </div>

    </section>

  </div>
  


  <script type="text/javascript">
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script>

  
  
    
  
<script async src="https://www.googletagmanager.com/gtag/js?id=UA-107500873-1"></script>
<script>
  window.dataLayer = window.dataLayer || [];
  function gtag(){dataLayer.push(arguments);}
  gtag('js', new Date());

  gtag('config', 'UA-107500873-1');
</script>


</body>
</html>